(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{157:function(e,t,n){},212:function(e,t,n){e.exports=n(395)},217:function(e,t,n){},395:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(11),o=n.n(c),i=(n(217),n(146)),l=n(25),u=n(396),s=n(123),m=n(24),f=n.n(m),p=n(33),d=n(49),b=n(155),h=n(26),E=(n(219),n(32)),j=n(397),v=n(398),O=n(403),k=(n(157),n(399)),y=n(400),x=n(402),g=n(401),w=function(e){var t=e.visible,n=e.onCancel,c=e.onSubmit,o=e.selectedUser,i=Object(a.useState)([]),l=Object(h.a)(i,2),u=l[0],s=l[1],m=Object(a.useState)(null),b=Object(h.a)(m,2),E=b[0],j=b[1],v=k.a.useForm(),O=Object(h.a)(v,1)[0];return Object(a.useEffect)((function(){Object(p.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("","/ratings"));case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,s(n);case 7:case"end":return e.stop()}}),e)})))()}),[]),r.a.createElement(y.a,{title:"Tell us about ".concat(o&&o.firstName,"'s latest gem"),visible:t,okText:"Submit",onCancel:n,onOk:function(){O.validateFields().then((function(e){c(Object(d.a)(Object(d.a)({},e),{},{id:E&&E.id})),n(),O.resetFields()})).catch((function(e){console.log("Validate Failed:",e)}))}},r.a.createElement(k.a,{form:O,layout:"vertical",name:"rating-modal"},r.a.createElement(k.a.Item,{name:"rating",label:"Rating",rules:[{required:!0,message:"You have to select rating before you can submit."}]},r.a.createElement(x.a,{count:u.length,tooltips:u.map((function(e){return r.a.createElement(a.Fragment,null,r.a.createElement("h3",null,e.title),r.a.createElement("p",null,e.description))})),value:E&&E.value,onChange:function(e){return j(u&&u.find((function(t){return t.value===e})))},allowClear:!0})),r.a.createElement(k.a.Item,{name:"title",label:"Title",rules:[{required:!0,message:"You have to enter a title for the joke so we know what it was."}]},r.a.createElement(g.a,null)),r.a.createElement(k.a.Item,{name:"description",label:"Optional Details"},r.a.createElement(g.a.TextArea,null))))},C=(u.a.Header,u.a.Content),S=function(e){var t=e.replace(/([A-Z])/g," $1");return t.charAt(0).toUpperCase()+t.slice(1)},T=function(){var e=Object(a.useState)([]),t=Object(h.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(!1),i=Object(h.a)(o,2),l=i[0],m=i[1],k=Object(a.useState)(null),y=Object(h.a)(k,2),x=y[0],g=y[1],T=function(e){return r.a.createElement(E.a,{type:"primary",shape:"circle",icon:r.a.createElement(O.a,null),onClick:function(){m(!0),g(e)}})},I=function(e){return e.sort((function(e,t){return t.score-e.score})),e.map((function(e){e.imgUrl;var t=Object(b.a)(e,["imgUrl"]);return Object(d.a)({},t)})).map((function(e,t){return Object(d.a)(Object(d.a)({key:t,rank:t+1},e),{},{actions:r.a.createElement(j.a,null,T(e))})}))},N=function(){var e=Object(p.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("","/users"));case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,c(I(n));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){N()}),[]);var A=n&&n.length&&Object(s.a)(Object.keys(n[0]).filter((function(e){return!["imgUrl","id","key"].includes(e)})).map((function(e,t){return{key:t,dataIndex:e,title:S(e)}}))),F=function(){var e=Object(p.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("","/users/").concat(x.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return n=t.id,a=Object(b.a)(t,["id"]),e.next=5,fetch("".concat("","/jokes/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(d.a)(Object(d.a)({},a),{},{userId:x&&x.id,ratingId:n}))});case 5:m(!1),g(null),N();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(u.a,null,r.a.createElement(C,null,r.a.createElement(v.a,{columns:A,dataSource:n}),r.a.createElement(w,{onSubmit:F,visible:l,onCancel:function(){return m(!1)},selectedUser:x})))},I=n(404),N=function(e){var t=e.visible,n=e.onCancel,a=e.onSubmit,c=(e.onEdit,e.initialValues),o=k.a.useForm(),i=Object(h.a)(o,1)[0];return r.a.createElement(y.a,{title:"Add a new user to the competition",visible:t,okText:"Submit",onCancel:n,onOk:function(){i.validateFields().then((function(e){a(e),n(),i.resetFields()})).catch((function(e){console.log("Validate Failed:",e)}))}},r.a.createElement(k.a,{form:i,layout:"vertical",name:"user-modal",initialValues:c},r.a.createElement(k.a.Item,{name:"firstName",label:"First Name",rules:[{required:!0,message:"The user must have a first name"}]},r.a.createElement(g.a,null)),r.a.createElement(k.a.Item,{name:"lastName",label:"Last Name",rules:[{required:!0,message:"The user must have a last name"}]},r.a.createElement(g.a,null))))},A=(y.a.confirm,function(e){var t=e.onSubmit,n=e.onCancel,a=e.isVisible,c=e.title,o=e.prompt;return r.a.createElement(y.a,{title:c,visible:a,okText:"Yes",onCancel:n,onOk:function(){t(),n()},okButtonProps:{danger:!0},centered:!0},r.a.createElement("p",null,o))}),F=u.a.Content,U=function(e){var t=e.replace(/([A-Z])/g," $1");return t.charAt(0).toUpperCase()+t.slice(1)},J=function(){var e=Object(a.useState)([]),t=Object(h.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(null),i=Object(h.a)(o,2),l=i[0],u=i[1],m=Object(a.useState)(!1),d=Object(h.a)(m,2),b=d[0],k=d[1],y=Object(a.useState)(!1),x=Object(h.a)(y,2),g=x[0],w=x[1],C=function(){var e=Object(p.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("","/users"));case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,c(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){C()}),[]);var S=n&&n.length&&[].concat(Object(s.a)(Object.keys(n[0]).filter((function(e){return!["imgUrl","score"].includes(e)})).map((function(e,t){return{key:t,dataIndex:e,title:U(e)}}))),[{key:Object.keys(n[0]).length,title:"Actions",render:function(e){return r.a.createElement(j.a,null,function(e){return r.a.createElement(E.a,{type:"primary",shape:"circle",icon:r.a.createElement(O.a,null),onClick:function(){u(e),k(!0)}})}(e),function(e){return r.a.createElement(E.a,{type:"primary",shape:"circle",icon:r.a.createElement(I.a,null),onClick:function(){u(e),w(!0)}})}(e))}}]),T=function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("","/users"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:k(!1),C();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("","/users/").concat(l&&l.id),{method:"DELETE"});case 2:C();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("","/users/").concat(l&&l.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:C();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(F,null,r.a.createElement(v.a,{columns:S,dataSource:n}),r.a.createElement(E.a,{type:"primary",onClick:function(){return k(!0)}},"Add a new user"),r.a.createElement(N,{onSubmit:l?V:T,visible:b,onCancel:function(){return k(!1)},initialValues:l}),r.a.createElement(A,{onSubmit:J,onCancel:function(){return w(!1)},isVisible:g,title:"Remove ".concat(l&&l.firstName),prompt:"Are you sure you want to remove ".concat(l&&l.firstName," from the tracker? Their jokes will also be deleted as a consequence of this.")}))},V=u.a.Content,D=v.a.Column,P=v.a.ColumnGroup,q=function(){var e=Object(a.useState)(null),t=Object(h.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(null),i=Object(h.a)(o,2),l=i[0],s=i[1],m=Object(a.useState)(!1),d=Object(h.a)(m,2),b=d[0],j=d[1],O=function(){var e=Object(p.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("","/jokes"));case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,c(n.reverse());case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){O()}),[]);var k=function(){var e=Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("","/jokes/").concat(l&&l.id),{method:"DELETE"});case 2:O();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(u.a,null,r.a.createElement(V,null,r.a.createElement(v.a,{dataSource:n},r.a.createElement(P,{title:"Bad Joke Info"},r.a.createElement(D,{title:"Title",dataIndex:"title",key:"title"}),r.a.createElement(D,{title:"Optional Details",dataIndex:"description",key:"description"})),r.a.createElement(P,{title:"The Joke-Cracker's Details"},r.a.createElement(D,{title:"First Name",dataIndex:"firstName",key:"firstName"}),r.a.createElement(D,{title:"Last Name",dataIndex:"lastName",key:"lastName"})),r.a.createElement(D,{title:"Points Earned",dataIndex:"value",key:"value",sorter:function(e,t){return e.value-t.value}}),r.a.createElement(D,{title:"Actions",render:function(e,t){return n=t,r.a.createElement(E.a,{type:"primary",shape:"circle",icon:r.a.createElement(I.a,null),onClick:function(){s(n),j(!0)}});var n}})),r.a.createElement(A,{onSubmit:k,onCancel:function(){return j(!1)},isVisible:b,title:"Delete ".concat(l&&l.title),prompt:"Are you sure want to delete ".concat(l&&l.title,"? This action is irreversible.")})))},B=n(65),H=["leaderboard","jokes","admin"],L=function(){var e=Object(l.e)();return r.a.createElement(B.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["0"]},H.map((function(t,n){return r.a.createElement(B.a.Item,{key:n,title:t,onClick:function(){e.push("/".concat("leaderboard"===t?"":t))}},function(e){var t=e.replace(/([A-Z])/g," $1");return t.charAt(0).toUpperCase()+t.slice(1)}(t))})))},$=u.a.Header,Y=function(){return r.a.createElement(i.a,null,r.a.createElement(u.a,null,r.a.createElement($,null,r.a.createElement(L,null)),r.a.createElement(l.a,{path:"/",component:T,exact:!0}),r.a.createElement(l.a,{path:"/admin",component:J,exact:!0}),r.a.createElement(l.a,{path:"/jokes",component:q,exact:!0})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[212,1,2]]]);
//# sourceMappingURL=main.c857b04a.chunk.js.map